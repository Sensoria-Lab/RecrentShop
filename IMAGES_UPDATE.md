# Обновление системы изображений продуктов

## Дата: 2 октября 2025

## Описание изменений

Обновлена система изображений на сайте для поддержки множественных фотографий каждого товара. Теперь каждый продукт может иметь галерею изображений, которая отображается на странице товара.

## Изменения в структуре данных

### 1. Обновлен интерфейс Product (`src/types/product.ts`)
- Добавлено новое опциональное поле `images?: string[]` для хранения массива путей к изображениям
- Поле `image` остается обязательным для обратной совместимости (используется как основное изображение в карточках)

### 2. Обновлены данные продуктов (`src/data/products.ts`)

#### Коврики для мыши (MOUSEPADS):
- **11 товаров**, каждый с 3-4 изображениями
- Новая структура папок в `public/images/products/mousepads/`:
  - `xl/xl_black_geoid/` - 3 фото
  - `xl/xl_white_geoid/` - 3 фото
  - `xl/xl_red/` - 4 фото
  - `xl/xl_blue/` - 4 фото
  - `l/l_black_geoid/` - 4 фото
  - `l/l_white_geoid/` - 4 фото
  - `l/l_red/` - 4 фото
  - `l/l_blue/` - 4 фото
  - `pro/` - 3 фото (Pro Speed)

#### Одежда (CLOTHING):
- **4 товара**, каждый с 4-5 изображениями (включая размерные сетки)
- Структура папок в `public/images/products/clothing/`:
  - `hoodies/seprents_white/` - 5 фото
  - `hoodies/seprents_black/` - 4 фото
  - `tshirts/Serpents2.0_black/` - 4 фото

#### Игровые рукава (SLEEVES):
- **2 товара**, каждый с 4 изображениями (включая размерные сетки)
- Структура папок в `public/images/products/clothing/sleeves/`:
  - `black_sleeve/` - 4 фото
  - `white_sleeve/` - 4 фото

## Изменения в компонентах

### 1. ProductCard (`src/components/ui/ProductCard.tsx`)
- Добавлено поле `images?: string[]` в интерфейс `ProductCardProps`
- Обновлена функция `handleCardClick` для передачи массива изображений при клике
- Основное изображение `image` продолжает отображаться в карточке товара

### 2. ProductPage (`src/components/pages/ProductPage.tsx`)
- Уже поддерживал галерею изображений через `useMemo`
- Логика работает следующим образом:
  - Если есть массив `images` - использует его
  - Если нет - дублирует основное изображение `image`
- Реализованы:
  - Навигация между изображениями (стрелки влево/вправо)
  - Миниатюры изображений для быстрого переключения
  - Анимация при смене изображения

### 3. MainPage (`src/components/pages/MainPage.tsx`)
- Обновлены компоненты ProductCard для передачи поля `images`
- Секция "Коврики для мыши": добавлен проп `images={product.images}`
- Секция "Одежда": добавлен проп `images={product.images}`

### 4. CatalogPage (`src/components/pages/CatalogPage.tsx`)
- Обновлен рендеринг ProductCard для включения поля `images={product.images}`
- Теперь при клике на карточку передаются все изображения товара

## Особенности реализации

### Галерея на странице товара:
1. **Основное изображение**: Крупное отображение с кнопками навигации
2. **Миниатюры**: Ряд маленьких превью под основным изображением
3. **Навигация**: 
   - Стрелки влево/вправо вне изображения
   - Клик по миниатюре
4. **Адаптивность**: Размеры изменяются на разных экранах (mobile, tablet, desktop)

### Анимации:
- Плавная смена изображений с `transition-all duration-300`
- Подсветка активной миниатюры с белой рамкой и тенью
- Эффект hover на миниатюрах

## Количество изображений

### Всего товаров: 17
- Коврики: 11 товаров × 3-4 фото = ~40 изображений
- Одежда: 4 товара × 4-5 фото = ~18 изображений
- Рукава: 2 товара × 4 фото = 8 изображений

**Итого: ~66 изображений товаров**

## Преимущества новой системы

✅ **Больше информации для покупателя**: Несколько ракурсов и детальных фото товара  
✅ **Размерные сетки**: Включены в галерею для одежды и рукавов  
✅ **Обратная совместимость**: Старые компоненты работают с полем `image`  
✅ **Гибкость**: Легко добавлять новые изображения в массив  
✅ **SEO-дружественность**: Все изображения имеют осмысленные названия файлов  

## Важное исправление (Динамическая смена изображений)

После первоначальной реализации была обнаружена проблема: изображения не менялись при выборе размера/цвета на странице товара.

### Решение:
Обновлена логика `productImages` в ProductPage:
- **Для ковриков**: Изображения динамически загружаются на основе `selectedSize` и `selectedColor`
- **Для одежды/рукавов**: Используется статический массив из данных (так как у них нет вариаций по размеру в изображениях)
- Добавлен `useEffect` для инициализации селекторов на основе данных продукта при загрузке страницы

### Карты путей к изображениям:
```typescript
// XL + Black/Gray → xl_black_geoid
// XL + White → xl_white_geoid  
// XL + Red → xl_red
// L + Black/Gray → l_black_geoid
// L + White → l_white_geoid
// L + Red → l_red
// Pro Speed → pro/
// logo-blue (XL) → xl_blue/
// logo-blue (L) → l_blue/
```

## Следующие шаги

- [ ] Оптимизация изображений (сжатие WebP)
- [ ] Добавление зума изображений на ProductPage
- [ ] Реализация ленивой загрузки изображений
- [ ] Добавление альтернативных текстов для SEO
- [ ] Создание скрипта для автоматического ресайза изображений

## Технические детали

### Формат изображений: 
- WebP (современный, сжатый формат)

### Структура путей:
```
/images/products/
  ├── mousepads/
  │   ├── xl/
  │   │   ├── xl_black_geoid/
  │   │   ├── xl_white_geoid/
  │   │   ├── xl_red/
  │   │   └── xl_blue/
  │   ├── l/
  │   │   ├── l_black_geoid/
  │   │   ├── l_white_geoid/
  │   │   ├── l_red/
  │   │   └── l_blue/
  │   └── pro/
  └── clothing/
      ├── hoodies/
      │   ├── seprents_white/
      │   └── seprents_black/
      ├── tshirts/
      │   └── Serpents2.0_black/
      └── sleeves/
          ├── black_sleeve/
          └── white_sleeve/
```

## Совместимость

- ✅ React 18
- ✅ TypeScript 4+
- ✅ Tailwind CSS 3+
- ✅ Все современные браузеры
- ✅ Мобильные устройства

## Авторы

Обновление выполнено: GitHub Copilot  
Дата: 2 октября 2025
